(this.webpackJsonpdirtbag=this.webpackJsonpdirtbag||[]).push([[0],{11:function(t,e,n){t.exports=n.p+"static/media/logo.5d5d9eef.svg"},12:function(t,e,n){t.exports=n(19)},17:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(10),s=n.n(o);n(17),n(11),n(9);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(6),l=n(5),u=n.n(l),c=n(7),p=n(1),d=n(2),f=n(4),m=n(3),h=(r.a.Component,function(t){Object(f.a)(n,t);var e=Object(m.a)(n);function n(t){return Object(p.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h2",null,this.props.name),r.a.createElement("div",null,"Route type: ",this.props.type," , Grade: ",this.props.grade,", Stars: ",this.props.stars))}}]),n}(r.a.Component)),v=function(t){Object(f.a)(n,t);var e=Object(m.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).renderContent=function(){var t=a.props.routes,e=a.props.areas.map((function(t){return r.a.createElement(n,{name:t[0],areas:t[1],routes:t[2]})}));return r.a.createElement("div",null,r.a.createElement("li",null,t)," ",r.a.createElement("li",null,e))},a.state={open:!1},a}return Object(d.a)(n,[{key:"togglePanel",value:function(t){this.setState({open:!this.state.open})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("h1",{onClick:function(e){return t.togglePanel(e)}},this.props.name),this.state.open?r.a.createElement("div",{style:{}},this.renderContent()):null)}}]),n}(r.a.Component),g=function(t){Object(f.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(p.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={loading:!0,distance:"",lat:"Getting your location . . . ",lon:"",routesRaw:null,routeList:[]},t.getLocation=function(){navigator.geolocation.getCurrentPosition((function(e){t.setState({lat:JSON.stringify(e.coords.latitude)}),t.setState({lon:JSON.stringify(e.coords.longitude)})}),(function(e){t.setState({coords:"Please allow location services"})}))},t.getRoutes=function(){var e=Object(c.a)(u.a.mark((function e(n){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),"200479780-a90fe858ff8ad40200286ef496ad1160","https://www.mountainproject.com/data/get-routes-for-lat-lon?",a="https://www.mountainproject.com/data/get-routes-for-lat-lon?".concat("&lat="+t.state.lat+"&lon="+t.state.lon+"&key=200479780-a90fe858ff8ad40200286ef496ad1160&maxDistance="+t.state.distance),e.next=6,fetch(a);case 6:return r=e.sent,e.next=9,r.json().catch((function(t){return console.log("bad input")}));case 9:void 0!==(o=e.sent)?(t.setState({routesRaw:o.routes}),t.parseRoutes(),t.setState({loading:!1})):(t.setState({routesRaw:["no routes found within specified distance",""]}),t.setState({loading:!1}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.parseRoutes=function(){console.log("parse routes");for(var e=[],n=0;n<t.state.routesRaw.length;n++)e.push(r.a.createElement(h,{name:t.state.routesRaw[n].name,location:t.state.routesRaw[n].location,type:t.state.routesRaw[n].type,grade:t.state.routesRaw[n].rating,stars:t.state.routesRaw[n].stars}));t.setState({routeList:e})},t.parseAreas=function(){console.log("parse areas");for(var e=[],n=function(n){var a=t.state.routeList[n],r=e.findIndex((function(t){return t[0]===a.props.location[0]}));-1===r&&(e.push([a.props.location[0],[],[]]),r=e.length-1);for(var o=e[r],s="",i=-1,l=1;l<a.props.location.length;l++)s=a.props.location[l],null!=o&&(i=o[1].findIndex((function(t){return t[0]===s}))),-1===i&&(o[1].push([s,[],[]]),i=o[1].length-1),o=o[1][i];o[2].push(a)},a=0;a<t.state.routeList.length;a++)n(a);return e.map((function(t){return r.a.createElement(v,{className:"Nested-areas",name:t[0],areas:t[1],routes:t[2]})}))},t}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return this.getLocation(),r.a.createElement("div",{className:"App"},r.a.createElement("form",{onSubmit:function(e){return t.getRoutes(e)}},r.a.createElement("label",null,"Find routes",r.a.createElement("input",{placeholder:"miles",name:"distance",type:"number",value:this.state.distance,onChange:function(e){return t.setState(Object(i.a)({},e.target.name,e.target.value))}})),"from you ",r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("div",null,"Your location: ",this.state.lat," , ",this.state.lon),this.state.loading?r.a.createElement("div",null,"Enter a distance to find routes"):r.a.createElement("div",null,r.a.createElement("div",null,"Routes near you"),r.a.createElement("div",null,this.parseAreas())))}}]),n}(r.a.Component);s.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},9:function(t,e,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.1e1c27a1.chunk.js.map